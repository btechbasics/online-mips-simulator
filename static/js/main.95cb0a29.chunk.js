(this["webpackJsonponline-mips-simulator"]=this["webpackJsonponline-mips-simulator"]||[]).push([[0],{23:function(e,t,a){e.exports=a(43)},28:function(e,t,a){},30:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(21),r=a.n(i),l=(a(28),a(12)),c=a.n(l),o=a(22),p=a(1),m=a(5),d=a(3),h=a(6),f=(a(30),a(4)),u=a(8),g=a.n(u),v=(a(38),a(20),a(39),[]),b=function(e){function t(){return Object(p.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"onChange",value:function(e,t){this.props.onCodeChange(String(e))}},{key:"render",value:function(){return s.a.createElement("div",{className:"IDE-wrapper"},s.a.createElement(g.a,{className:"IDE",mode:"mips_assembler",theme:"tomorrow_night",placeholder:"//write assembly code here...",fontSize:18,style:{width:"100%",height:"665px"},name:"mipsIDE",editorProps:{$blockScrolling:!0},setOptions:{tabSize:4,wrap:!1},showPrintMargin:!1,value:this.props.code,onChange:this.onChange.bind(this),annotations:v,enableBasicAutocompletion:!0}))}}]),t}(n.Component),y=(a(40),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={result:""},a}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t="";return t=1===this.props.running?s.a.createElement("span",{href:"#"},s.a.createElement("i",{className:"fas fa-spinner",style:{color:"yellow"}})," Running"):2===this.props.running?s.a.createElement("span",{href:"#"},s.a.createElement("i",{className:"fas fa-check",style:{color:'"yellow'}})," Done"):s.a.createElement("span",{href:"#"},s.a.createElement("i",{className:"fas fa-play",style:{color:"yellow"}})," Run"),s.a.createElement("nav",{className:"main-nav"},s.a.createElement("div",{className:"leftSide"},s.a.createElement("div",{className:"brand-icon"},s.a.createElement("i",{className:"fas fa-microchip"})),s.a.createElement("div",{className:"nav-item nav-buttons upload"},s.a.createElement("span",{className:"file"},"Upload",s.a.createElement("input",{type:"file",name:"file",id:"fileInput",accept:".asm",onChange:this.props.setFile.bind(this),multiple:!0}))),s.a.createElement("div",{className:"nav-item nav-buttons",style:this.props.isShowing?{backgroundColor:"#72757a"}:{}},s.a.createElement("span",{onClick:function(){return e.props.toggleCacheSettings()}},"Cache Settings")),s.a.createElement("div",{className:"nav-item nav-buttons"},s.a.createElement("span",{className:"file",onClick:this.props.deleteFile.bind(this)},"Clear")),s.a.createElement("div",{className:"nav-item nav-buttons",onClick:function(){return e.props.toggleDF()},style:this.props.dataForw?{backgroundColor:"green"}:{}},s.a.createElement("span",null,"Data Forward")),s.a.createElement("div",{className:"nav-item nav-buttons",onClick:function(){return e.props.toggleMS()},style:this.props.moreStats?{backgroundColor:"green"}:{}},s.a.createElement("span",null,"More Stats")),s.a.createElement("div",{className:"nav-item nav-buttons",onClick:function(){return alert("Using The Simulator\n1. Upload or Write Your Code\n2. Enable/Disable DataForwarding Option (Disabled By Default)\n3. Enable/Disable MoreStats To View Pipeline (Disabled By Default)\n4. Configure The Cache\n5. StepRun/Run Your MIPS Code\n\nCache Table does not get updated automatically, please use refresh button to get latest contents of the cache\n\nCheck Performance Of Program and Simulator in SideBar\n** Execution may take few seconds depending on Configuration of Simulator")}},s.a.createElement("span",null,"Help"))),s.a.createElement("div",{className:"title",style:{display:"inline"}},"Mips Simulator"),s.a.createElement("div",{className:"rightSide",style:{display:"inline"}},s.a.createElement("span",{className:"nav-item  nav-buttons",onClick:this.props.assemble},s.a.createElement("span",{href:"#"},"Assemble")),s.a.createElement("span",{className:"nav-item  nav-buttons",onClick:this.props.execute},t),s.a.createElement("span",{className:"nav-item  nav-buttons",onClick:this.props.stepRun},s.a.createElement("span",{href:"#"},"Step-Run"))))}}]),t}(s.a.Component)),C=a(2),E=(a(41),function(e){var t=Object(n.useState)(!0),a=Object(C.a)(t,2),i=a[0],r=a[1],l=i?"console-btn active":"console-btn",c=i?"console-btn":"console-btn active";return s.a.createElement("div",{className:"console-wrapper"},s.a.createElement("div",{className:"console-nav"},s.a.createElement("span",{className:l,onClick:function(){r(!0)}},"Console"),s.a.createElement("span",{className:c,onClick:function(){r(!1)}},"Pipeline")),s.a.createElement("div",{style:i?{display:"block"}:{display:"none"}},s.a.createElement(g.a,{className:"console",theme:"tomorrow_night",fontSize:14,style:{width:"100%",height:"230px"},name:"console",editorProps:{$blockScrolling:!0},setOptions:{tabSize:4,wrap:!1},showPrintMargin:!1,value:e.console,readOnly:!0})),s.a.createElement("div",{className:"pipeline-screen",style:i||0!==e.operations.length&&e.moreStats?{display:"none"}:{display:"block",color:"white"}},"Enable More Stats And Run Your Program To See Instructions In Their Pipeline Stages ( Works Best With Step-Run )",s.a.createElement("div",{style:{color:"orange"}},s.a.createElement("span",{style:{fontWeight:"bold"}},"Warning:")," Do Not Turn On For Large Programs Like 'Bubble Sort', As Time Taken To Complete The Task May Increase By Large Amount Or System May Hang!!")),s.a.createElement("div",{className:"pipeline-screen",style:!i&&e.operations.length>0&&e.moreStats?{display:"block"}:{display:"none"}},s.a.createElement("table",{border:"2",id:"table-main"},s.a.createElement("tr",{id:"cycle-number"},s.a.createElement("td",{align:"center",nowrap:"nowrap",className:"instr-cell",id:"instr-cell-heading"},"Cycle/Instruction")))))}),L=a(7),S=(a(42),function(e){var t=Object(n.useState)({registers:!1,dataSegment:!1,sampleProgram:!1,analysis:!1,cacheTable:!1}),a=Object(C.a)(t,2),i=a[0],r=a[1],l=Object(n.useState)(!1),c=Object(C.a)(l,2),o=c[0],p=c[1],m=Object(n.useState)(1),d=Object(C.a)(m,2),h=d[0],f=d[1],u=Object(n.useState)(1),g=Object(C.a)(u,2),v=g[0],b=g[1],y=[];e.registers.forEach((function(e,t){y.push({name:t,val:e})}));for(var E=[],S=0;S<e.memoryUsed/4;S++){var w=e.dataSegment[S];E.push({dec:parseInt(w,2),bin:w})}var I="";if(0===Object.keys(e.performance).length&&0===e.running)I=s.a.createElement("div",{className:"pa-program"},"Run your assemble code to check performance");else if(1===e.running)I=s.a.createElement("span",{className:"pa-program"},"Running...");else{var k="%",N=(e.performance.l1CacheMiss/(e.performance.l1CacheMiss+e.performance.l1CacheHits)*100).toString().slice(0,3);isNaN(N)&&(N="Memory Not Accessed",k="");var M=(e.performance.l2CacheMiss/(e.performance.l2CacheHits+e.performance.l2CacheMiss)*100).toString().slice(0,3);isNaN(M)&&(M="Memory Not Accessed"),I=s.a.createElement("div",null,s.a.createElement("div",{className:"pa-program"},"Number of cycles: ",e.performance.cycles),s.a.createElement("div",{className:"pa-program"},"Number of stalls: ",e.performance.stalls),s.a.createElement("div",{className:"pa-program"},"IPC: ",(1/(1+e.performance.stalls/e.performance.cycles)).toFixed(2)),s.a.createElement("div",{className:"pa-program"},"L1 Cache Misses: ",e.performance.l1CacheMiss),s.a.createElement("div",{className:"pa-program"},"L1 Cache Hits: ",e.performance.l1CacheHits),s.a.createElement("div",{className:"pa-program"},"L2 Cache Misses: ",e.performance.l2CacheMiss),s.a.createElement("div",{className:"pa-program"},"L2 Cache Hits: ",e.performance.l2CacheHits),s.a.createElement("div",{className:"pa-program"},"L1 Cache Miss Rate: ",N,k),s.a.createElement("div",{className:"pa-program"},"L2 Cache Miss Rate: ",M,k))}Object(n.useEffect)((function(){e.isShowing&&r({registers:!1,dataSegment:!1,sampleProgram:!1,analysis:!1,cacheTable:!1})}),[e.isShowing]),Object(n.useEffect)((function(){p(e.isShowing)}),[e.isShowing]),Object(n.useEffect)((function(){(i.analysis||i.dataSegment||i.registers||i.sampleProgram||i.cacheTable)&&p(!1)}),[i.analysis,i.dataSegment,i.registers,i.sampleProgram,i.cacheTable]);var $=e.hideCacheSettings;Object(n.useEffect)((function(){return $(o)}),[o,$]);var B="";B=1===h?s.a.createElement("div",{className:"cache-settings"},s.a.createElement("div",{className:"cache-options"},"Cache Size:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(1,parseInt(t.target.value),e.l1CacheInfo.blockSize,e.l1CacheInfo.associativity,e.l1CacheInfo.latency)}},s.a.createElement("option",{value:16,selected:16===e.l1CacheInfo.cacheSize},"16 Bytes"),s.a.createElement("option",{value:32,selected:32===e.l1CacheInfo.cacheSize},"32 Bytes"),s.a.createElement("option",{value:64,selected:64===e.l1CacheInfo.cacheSize},"64 Bytes"))),s.a.createElement("div",{className:"cache-options"},"Block Size:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(1,e.l1CacheInfo.cacheSize,parseInt(t.target.value),e.l1CacheInfo.associativity,e.l1CacheInfo.latency)}},s.a.createElement("option",{value:4,selected:4===e.l1CacheInfo.blockSize},"4 Bytes"),s.a.createElement("option",{value:8,selected:8===e.l1CacheInfo.blockSize},"8 Bytes"),s.a.createElement("option",{value:16,selected:16===e.l1CacheInfo.blockSize},"16 Bytes"),s.a.createElement("option",{value:32,selected:32===e.l1CacheInfo.blockSize},"32 Bytes"))),s.a.createElement("div",{className:"cache-options"},"Associativity:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(1,e.l1CacheInfo.cacheSize,e.l1CacheInfo.blockSize,parseInt(t.target.value),e.l1CacheInfo.latency)}},s.a.createElement("option",{value:e.l1CacheInfo.cacheSize/e.l1CacheInfo.blockSize,selected:e.l1CacheInfo.associativity===e.l1CacheInfo.cacheSize/e.l1CacheInfo.blockSize},"Direct Mapped"),s.a.createElement("option",{value:2,selected:2===e.l1CacheInfo.associativity},"2 Way"),s.a.createElement("option",{value:4,selected:4===e.l1CacheInfo.associativity},"4 Way"),s.a.createElement("option",{value:1,selected:1===e.l1CacheInfo.associativity},"Fully Associative"))),s.a.createElement("div",{className:"cache-options"},"Latency:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(1,e.l1CacheInfo.cacheSize,e.l1CacheInfo.blockSize,e.l1CacheInfo.associativity,parseInt(t.target.value))}},s.a.createElement("option",{value:2,selected:2===e.l1CacheInfo.latency},"2 Cycles"),s.a.createElement("option",{value:3,selected:3===e.l1CacheInfo.latency},"3 Cycles")))):s.a.createElement("div",{className:"cache-settings"},s.a.createElement("div",{className:"cache-options"},"Cache Size:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(2,parseInt(t.target.value),e.l2CacheInfo.blockSize,e.l2CacheInfo.associativity,e.l2CacheInfo.latency)}},s.a.createElement("option",{value:64,selected:64===e.l2CacheInfo.cacheSize},"64 Bytes"),s.a.createElement("option",{value:128,selected:128===e.l2CacheInfo.cacheSize},"128 Bytes"),s.a.createElement("option",{value:256,selected:256===e.l2CacheInfo.cacheSize},"256 Bytes"),s.a.createElement("option",{value:512,selected:512===e.l2CacheInfo.cacheSize},"512 Bytes"))),s.a.createElement("div",{className:"cache-options"},"Block Size:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(2,e.l2CacheInfo.cacheSize,parseInt(t.target.value),e.l2CacheInfo.associativity,e.l2CacheInfo.latency)}},s.a.createElement("option",{value:16,selected:16===e.l2CacheInfo.blockSize},"16 Bytes"),s.a.createElement("option",{value:32,selected:32===e.l2CacheInfo.blockSize},"32 Bytes"),s.a.createElement("option",{value:64,selected:64===e.l2CacheInfo.blockSize},"64 Bytes"))),s.a.createElement("div",{className:"cache-options"},"Associativity:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(2,e.l2CacheInfo.cacheSize,e.l2CacheInfo.blockSize,parseInt(t.target.value),e.l2CacheInfo.latency)}},s.a.createElement("option",{value:e.l2CacheInfo.cacheSize/e.l2CacheInfo.blockSize,selected:e.l2CacheInfo.associativity===e.l2CacheInfo.cacheSize/e.l2CacheInfo.blockSize},"Direct Mapped"),s.a.createElement("option",{value:2,selected:2===e.l2CacheInfo.associativity},"2 Way"),s.a.createElement("option",{value:4,selected:4===e.l2CacheInfo.associativity},"4 Way"),s.a.createElement("option",{value:8,selected:8===e.l2CacheInfo.associativity},"8 Way"),s.a.createElement("option",{value:1,selected:1===e.l2CacheInfo.associativity},"Fully Associative"))),s.a.createElement("div",{className:"cache-options"},"Latency:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.configureCache(2,e.l2CacheInfo.cacheSize,e.l2CacheInfo.blockSize,e.l2CacheInfo.associativity,parseInt(t.target.value))}},s.a.createElement("option",{value:3,selected:3===e.l2CacheInfo.latency},"3 Cycles"),s.a.createElement("option",{value:4,selected:4===e.l2CacheInfo.latency},"4 Cycles"),s.a.createElement("option",{value:5,selected:5===e.l2CacheInfo.latency},"5 Cycles"))));var z=function(t){t&&t.stopPropagation(),i.cacheTable&&e.refreshCacheContents(v)};return Object(n.useEffect)((function(){if(i.cacheTable)if(1===v){var t=0,a=document.getElementById("cache-tableL1");a.innerHTML="";for(var n=0;n<e.l1CacheInfo.cacheSize/e.l1CacheInfo.blockSize;n++){var s=a.insertRow(n);s.className="cache-row";for(var r=0;r<e.l1CacheInfo.blockSize/4;r++){var l=s.insertCell(r);l.setAttribute("nowrap","nowrap"),l.className="cache-block cache-blockL1".concat(t),t++}}z()}else{var c=0;(a=document.getElementById("cache-tableL2")).innerHTML="";for(var o=0;o<e.l2CacheInfo.cacheSize/e.l2CacheInfo.blockSize;o++){(s=a.insertRow(o)).className="cache-row";for(var p=0;p<e.l2CacheInfo.blockSize/4;p++)(l=s.insertCell(p)).setAttribute("nowrap","nowrap"),l.className="cache-block cache-blockL2".concat(c),c++}z()}else(a=document.getElementById("cache-tableL1")).innerHTML="",(a=document.getElementById("cache-tableL2")).innerHTML=""}),[i,v,e.l2CacheInfo.cacheSize,e.l2CacheInfo.blockSize,e.l1CacheInfo.cacheSize,e.l1CacheInfo.blockSize]),s.a.createElement("div",{className:"sidebar"},s.a.createElement("div",null,s.a.createElement("div",{className:"sidebar-options",onClick:function(){return r(Object(L.a)({},i,{registers:!i.registers}))}},i.registers?s.a.createElement("i",{className:"fas fa-folder-open"}):s.a.createElement("i",{className:"fas fa-folder"}),"REGISTERS"),s.a.createElement("div",{className:"registers",style:i.registers?{display:"block"}:{display:"none"}},s.a.createElement("div",{className:"register"},s.a.createElement("span",{className:"register_no"},"PC = ")," ",s.a.createElement("span",{className:"register_val"},e.pc)),y.map((function(e,t){if(t<32){var a=e.name,n=e.val;return t<10?s.a.createElement("div",{className:"register",key:t},s.a.createElement("span",{className:"register_no"},"R",t),"\xa0\xa0",s.a.createElement("span",{className:"register_name"},"[",a,"]")," = ",s.a.createElement("span",{className:"register_val"},n)):s.a.createElement("div",{className:"register",key:t},s.a.createElement("span",{className:"register_no"},"R",t)," ",s.a.createElement("span",{className:"register_name"},"[",a,"]")," = ",s.a.createElement("span",{className:"register_val"},n))}return null})))),s.a.createElement("div",null,s.a.createElement("div",{className:"sidebar-options",onClick:function(){return r(Object(L.a)({},i,{dataSegment:!i.dataSegment}))}},i.dataSegment?s.a.createElement("i",{className:"fas fa-folder-open"}):s.a.createElement("i",{className:"fas fa-folder"}),"DATA SEGMENT",s.a.createElement("span",{style:{color:"white",float:"right",paddingRight:"7px",fontSize:"12px",alignItems:"center"}},e.memoryUsed," bytes/ 4 KB")),s.a.createElement("div",{style:i.dataSegment?{display:"block"}:{display:"none"}},E.map((function(e,t){return s.a.createElement("div",{key:t,className:"data-segment"},e.dec,"\xa0\xa0\xa0\xa0",s.a.createElement("span",{style:{fontSize:"11px"}},e.bin))})))),s.a.createElement("div",null,s.a.createElement("div",{className:"sidebar-options",onClick:function(){return r(Object(L.a)({},i,{analysis:!i.analysis}))}},i.analysis?s.a.createElement("i",{className:"fas fa-folder-open"}):s.a.createElement("i",{className:"fas fa-folder"}),"PERFORMANCE ANALYSIS"),s.a.createElement("div",{style:i.analysis?{display:"block",color:"white"}:{display:"none"}},I)),s.a.createElement("div",null,s.a.createElement("div",{className:"sidebar-options",onClick:function(){return r(Object(L.a)({},i,{cacheTable:!i.cacheTable}))}},i.cacheTable?s.a.createElement("i",{className:"fas fa-folder-open"}):s.a.createElement("i",{className:"fas fa-folder"}),"CACHE TABLE",s.a.createElement("span",{style:i.cacheTable?{float:"right"}:{display:"none"},onClick:function(e){return z(e)}},s.a.createElement("i",{className:"fas fa-redo-alt"}))),s.a.createElement("div",{style:i.cacheTable?{display:"block",color:"white"}:{display:"none"}},s.a.createElement("div",{className:"cache-headers"},s.a.createElement("span",{className:"cache-labels",style:1===v?{backgroundColor:"#696b6a"}:{},onClick:function(){b(1)}},"L1 Cache"),s.a.createElement("span",{className:"cache-labels",style:2===v?{backgroundColor:"#696b6a"}:{},onClick:function(){b(2)}},"L2 Cache")),s.a.createElement("table",{border:"2",id:"cache-tableL1",style:1!==v?{display:"none"}:{}}),s.a.createElement("table",{border:"2",id:"cache-tableL2",style:2!==v?{display:"none"}:{}}))),s.a.createElement("div",null,s.a.createElement("div",{className:"sidebar-options",onClick:function(){return r(Object(L.a)({},i,{sampleProgram:!i.sampleProgram}))}},i.sampleProgram?s.a.createElement("i",{className:"fas fa-folder-open"}):s.a.createElement("i",{className:"fas fa-folder"}),"SAMPLE PROGRAMS"),s.a.createElement("div",{style:i.sampleProgram?{display:"block"}:{display:"none"}},s.a.createElement("div",{className:"s-program",onClick:function(){e.sampleProgram("bubbleSort")}},s.a.createElement("span",{style:{color:"yellow",fontSize:"11px"}},"asm "),"Bubble Sort"),s.a.createElement("div",{className:"s-program",onClick:function(){e.sampleProgram("sumOfNums")}},s.a.createElement("span",{style:{color:"yellow",fontSize:"11px"}},"asm "),"Sum of first 10 natural numbers"),s.a.createElement("div",{className:"s-program",onClick:function(){e.sampleProgram("tryOutPipeline")}},s.a.createElement("span",{style:{color:"yellow",fontSize:"11px"}},"asm "),"Try Out Pipeline"),s.a.createElement("div",{className:"s-program",onClick:function(){e.sampleProgram("checkOutCache")}},s.a.createElement("span",{style:{color:"yellow",fontSize:"11px"}},"asm "),"Check Out Cache"))),s.a.createElement("div",{style:o?{display:"block",color:"white"}:{display:"none"},className:"cache-counter"},s.a.createElement("div",{className:"cache-headers"},s.a.createElement("span",{className:"cache-labels",style:1===h?{backgroundColor:"#696b6a"}:{},onClick:function(){return f(1)}},"L1 Cache"),s.a.createElement("span",{className:"cache-labels",style:2===h?{backgroundColor:"#696b6a"}:{},onClick:function(){return f(2)}},"L2 Cache")),s.a.createElement("div",null,B,s.a.createElement("div",{className:"cache-options"},"Main Memory Latency:",s.a.createElement("select",{className:"display-value",onChange:function(t){return e.mainMemoryConfig(parseInt(t.target.value))}},s.a.createElement("option",{value:6,selected:6===e.mainMemory},"6 Cycles"),s.a.createElement("option",{value:8,selected:8===e.mainMemory},"8 Cycles"),s.a.createElement("option",{value:10,selected:10===e.mainMemory},"10 Cycles"))))))}),w=".data\narray: \n\t.word 4, 2, 1, 5, 3\n\n.text\nend:\n    jr $ra\n    \nprintLoop:\n    beq $t0, $t1, end\n    lw $s1, 0($s0)\n    li $v0, 1\n    add $a0, $zero, $s1\n    syscall\n    addi $s0, $s0, 4\n    addi $t0, $t0, 1\n    j printLoop\n    \nprint:\n    lui $s0, 0x1001\n    li $t0, 0\n    j printLoop\n\ninc:\n\taddi $s0, $s0, 4\n\tj loop1\n\nswap:\n\tsw $t4, 0($s0)\n\tsw $t6, 0($s2)\n\n\tlw $t6, 0($s0)\n\n\taddi $s2, $s2, 4\n\taddi $t3, $t3, 1\n\n\tj loop2\n\nloop2:\n\tbeq $t3, $t1, inc\n\tlw $t4, 0($s2)\n\n\tslt $t5, $t4, $t6 \n\tbne $t5, $zero, swap\n\n\taddi $s2, $s2, 4\n\taddi $t3, $t3, 1\n\n\tj loop2\n\n\nloop1:\n    beq $t0, $t1, print\n    \n    lw $t6, 0($s0)\n\taddi $t3, $t0, 1 \n\n\taddi $s2, $s0, 4\n\n\taddi $t0, $t0, 1\n\n\tj loop2\n\n.globl main\nmain:\n\tlui $s0, 0x1001\n\tli $t0, 0\n\tli $t1, 5\n    j loop1",I=".data\n.text\n\nend:\n    li $v0, 1\n    add $a0, $zero, $s1\n    syscall\n    jr $ra\n\nsum:\n    beq $t0, $s0, end\n    add $s1, $s1, $t0\n    addi $t0, $t0, 1\n    j sum\n\n.globl main\nmain:\n    li $s0, 11\n    li $s1, 0\n    li $t0, 1\n    j sum   ",k=".globl main\nmain:\n    addi $t0, $t0, 10\n    addi $t1, $t0, 10\n    addi $t2, $t1, 10\n    addi $t3, $t2, 10\n    addi $t4, $t3, 10\n",N=".data\narray:\n    .word 1, 2, 3, 4, 5, 6, 7, 8, 9, 10\n\n.text\nend:\n    jr $ra\n\nsumarray2:\n    beq $t0, $t1, end\n    lw $t2, 0($s1)\n    add $s0, $t2, $s0\n    addi $t0, $t0, 1\n    addi $s1, $s1, 4\n    j sumarray2    \n\nsumagain:\n    li $t0, 0\n    li $t1, 10\n    lui $s1, 0x1001\n    j sumarray2  \n\nsumarray:\n    beq $t0, $t1, sumagain\n    lw $t2, 0($s1)\n    add $s0, $t2, $s0\n    addi $t0, $t0, 1\n    addi $s1, $s1, 4\n    j sumarray\n\n.globl main\nmain:\n    li $s0, 0\n    li $t0, 0\n    li $t1, 10\n    lui $s1, 0x1001\n    j sumarray\n",M={running:!0,memory:new Array(1024),instrLabels:{},dataLables:{},registers:new Map([["r0",0],["at",0],["v0",0],["v1",0],["a0",0],["a1",0],["a2",0],["a3",0],["t0",0],["t1",0],["t2",0],["t3",0],["t4",0],["t5",0],["t6",0],["t7",0],["s0",0],["s1",0],["s2",0],["s3",0],["s4",0],["s5",0],["s6",0],["s7",0],["t8",0],["t9",0],["k0",0],["k1",0],["gp",0],["sp",0],["s8",0],["ra",0]]),pc:0,endOfInstr:!1,setRegister:function(e,t){M.registers.set(e,t)},getRegister:function(e){return"zero"===e?0:M.registers.get(e)},reset:function(){M.running=!0,M.memory=new Array(1024),M.dataLables={},M.instrLabels={},M.pc=0,M.endOfInstr=!1,M.setRegister("sp",4096),M.registers=new Map([["r0",0],["at",0],["v0",0],["v1",0],["a0",0],["a1",0],["a2",0],["a3",0],["t0",0],["t1",0],["t2",0],["t3",0],["t4",0],["t5",0],["t6",0],["t7",0],["s0",0],["s1",0],["s2",0],["s3",0],["s4",0],["s5",0],["s6",0],["s7",0],["t8",0],["t9",0],["k0",0],["k1",0],["gp",0],["sp",0],["s8",0],["ra",0]])}},$=M,B={instruction:[],pointer:new Map,dataAddr:new Map,ptrArray:[],memPtr:0,parse:function(e){var t=[];return e.split("\n").forEach((function(e){var a=e.trim().split(/[ ,.]+/);1===a.length&&""===a[0]||t.push(a)})),t.forEach((function(e,t){":"===e[0][e[0].length-1]&&(B.pointer.set(e[0].substring(0,e[0].length-1),t),B.ptrArray.push(e[0].substring(0,e[0].length-1)))})),B.memPtr=0,t.forEach((function(e,t){"text"!==e[1]&&"word"===e[1]&&(B.dataAddr[B.ptrArray[B.memPtr]]=B.memPtr,e.forEach((function(e,t){if(t>1){for(var a=parseInt(e).toString(2),n=a.length,s=0;s<32-n&&!isNaN(parseInt(a,2));s++)a="0"+a;isNaN(parseInt(a,2))||($.memory[B.memPtr]=a,B.memPtr+=1)}})))})),t},reset:function(){B.instruction=[],B.pointer=new Map,B.dataAddr=new Map,B.ptrArray=[]}},z=B,O=a(9),x=function(){function e(t,a){Object(p.a)(this,e),this.indexBitsL1=Math.log2(t.associativity),this.offsetBitsL1=Math.log2(t.blockSize/4),this.tagBitsL1=32-(this.indexBitsL1+this.offsetBitsL1),this.indexBitsL2=Math.log2(a.associativity),this.offsetBitsL2=Math.log2(a.blockSize/4),this.tagBitsL2=32-(this.indexBitsL2+this.offsetBitsL2),this.nbLinesL1=t.cacheSize/t.blockSize,this.tagL1=new Array(this.nbLinesL1),this.cntL1=new Array(this.nbLinesL1).fill(0),this.dataL1=new Array(t.cacheSize/4),this.nbLinesL2=a.cacheSize/a.blockSize,this.tagL2=new Array(this.nbLinesL2),this.cntL2=new Array(this.nbLinesL2).fill(0),this.dataL2=new Array(a.cacheSize/4),this.hitsL1=0,this.missL1=0,this.hitsL2=0,this.missL2=0}return Object(f.a)(e,[{key:"searchInCacheL1",value:function(e,t,a){0===a.length&&(a="0");for(var n=0===this.indexBitsL1?0:parseInt(t,2)*(this.nbLinesL1/Math.pow(2,this.indexBitsL1)),s=0;s<parseInt(this.nbLinesL1/Math.pow(2,this.indexBitsL1));s++){if(e===this.tagL1[n+s])return this.dataL1[(n+s)*Math.pow(2,this.offsetBitsL1)+parseInt(a,2)]}return null}},{key:"searchInCacheL2",value:function(e,t,a,n){for(var s=0===this.indexBitsL2?0:parseInt(t,2)*(this.nbLinesL2/Math.pow(2,this.indexBitsL2)),i=0;i<parseInt(this.nbLinesL2/Math.pow(2,this.indexBitsL2));i++){if(e===this.tagL2[s+i]){for(var r=[],l=0;l<n;l++){var c=this.dataL2[(s+i)*Math.pow(2,this.offsetBitsL2)+parseInt(a,2)+l];if(!c)return null;r.push(c)}return r}}return null}},{key:"writeToCacheL1",value:function(e,t,a,n){var s,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof i&&0===i.length&&(i="0");for(var r=0===this.indexBitsL1?0:parseInt(t,2),l=r*(this.nbLinesL1/Math.pow(2,this.indexBitsL1)),c=l;c<l+this.nbLinesL1/Math.pow(2,this.indexBitsL1)&&null!==i;c++)if(this.tagL1[c]===e)return this.dataL1[c*Math.pow(2,this.offsetBitsL1)+parseInt(i,2)]=a,this.tagL1[c]=e,void(this.cntL1[c]=n);for(var o=l+1,p=0;o<this.nbLinesL1/Math.pow(2,this.indexBitsL1)+l;)this.cntL1[p+l]>this.cntL1[o]&&(p=o-l),o++;var m=r*(this.nbLinesL1/Math.pow(2,this.indexBitsL1))*Math.pow(2,this.offsetBitsL1)+p*Math.pow(2,this.offsetBitsL1),d=(s=this.dataL1).splice.apply(s,[m,a.length].concat(Object(O.a)(a))),h=r*(this.nbLinesL1/Math.pow(2,this.indexBitsL1))+p;if(d.some((function(e){return"number"===typeof parseInt(e,2)}))){var f=[];d.forEach((function(e){e&&f.push(e)})),this.writeToCacheL2(this.tagL1[h].toString(2)+t.toString(2)+(m%Math.pow(2,this.offsetBitsL1)).toString(2),f,n)}this.tagL1[h]=e,this.cntL1[h]=n}},{key:"writeToCacheL2",value:function(e,t,a){for(var n,s=(e=e.slice(0,32)).slice(32-this.offsetBitsL2),i=e.slice(32-(this.offsetBitsL2+this.indexBitsL2),32-this.offsetBitsL2),r=e.slice(0,this.tagBitsL2),l=0===this.indexBitsL2?0:parseInt(i,2),c=l*(this.nbLinesL2/Math.pow(2,this.indexBitsL2)),o=c;o<c+this.nbLinesL2/Math.pow(2,this.indexBitsL2);o++){var p;if(void 0===this.tagL2[o]||this.tagL2[o]===r)return(p=this.dataL2).splice.apply(p,[o*Math.pow(2,this.offsetBitsL2)+parseInt(s,2),t.length].concat(Object(O.a)(t))),this.tagL2[o]=r,void(this.cntL2[o]=a)}for(var m=c+1,d=0;m<this.nbLinesL2/Math.pow(2,this.indexBitsL2)+c;)this.cntL2[d+c]>this.cntL2[m]&&(d=m-c),m++;var h=l*(this.nbLinesL2/Math.pow(2,this.indexBitsL2))*Math.pow(2,this.offsetBitsL2)+d*Math.pow(2,this.offsetBitsL2);(n=this.dataL2).splice.apply(n,[h,t.length].concat(Object(O.a)(t)));var f=l*(this.nbLinesL2/Math.pow(2,this.indexBitsL2))+d;this.tagL2[f]=r,this.cntL2[f]=a}},{key:"readFromCache",value:function(e,t){for(var a=(e=(e+=268500992).toString(2)).length;a<32;a++)e="0"+e;var n=e.slice(32-this.offsetBitsL1),s=e.slice(32-(this.offsetBitsL1+this.indexBitsL1),32-this.offsetBitsL1),i=e.slice(0,this.tagBitsL1),r=this.searchInCacheL1(i,s,n),l="l1";if(null===r){var c=e.slice(32-this.offsetBitsL2),o=e.slice(32-(this.offsetBitsL2+this.indexBitsL2),32-this.offsetBitsL2),p=e.slice(0,this.tagBitsL2);l="l2",null!==(r=this.searchInCacheL2(p,o,c,Math.pow(2,this.offsetBitsL1)))&&(this.writeToCacheL1(i,s,r,t),r=r[0|parseInt(n,2)])}if(null===r){var m=Math.pow(2,this.offsetBitsL1);e=parseInt(e,2)-268500992,e-=e%Math.pow(2,this.offsetBitsL1),r=[];for(var d=0;d<m;d++)r.push($.memory[e+d]);l="mm",this.writeToCacheL1(i,s,r,t),r=r[0|parseInt(n,2)]}return[parseInt(r,2),l]}},{key:"writeThrough",value:function(e,t,a){for(var n=(e=(e+=268500992).toString(2)).length;n<32;n++)e="0"+e;var s=e.slice(32-this.offsetBitsL1),i=e.slice(32-(this.offsetBitsL1+this.indexBitsL1),32-this.offsetBitsL1),r=e.slice(0,this.tagBitsL1),l=this.searchInCacheL1(r,i,s);null!==l&&this.writeToCacheL1(r,i,t,a,s),s=e.slice(32-this.offsetBitsL2),i=e.slice(32-(this.offsetBitsL2+this.indexBitsL2),32-this.offsetBitsL2),r=e.slice(0,this.tagBitsL2),null!==(l=this.searchInCacheL2(r,i,s,1))&&this.writeToCacheL2(r.toString()+i.toString()+s.toString(),[t],a),e=parseInt(e,2)-268500992,$.memory[e]=t}}]),e}(),j=["add","sub","slt"],R=["addi","slti"],T=["beq","bne"],_=["lw","li","la","lui"],A=["j","jr"],F=["sw"],P=function(e,t){return z.pointer.get(t[e][0].split(":")[0])&&(e+=1,$.pc+=1),j.indexOf(t[e][0])>=0?($.pc+=1,{instr:t[e],operator:t[e][0],dest:t[e][1].split("$")[1],src1:t[e][2].split("$")[1],src2:t[e][3].split("$")[1],completed:!1}):R.indexOf(t[e][0])>=0?($.pc+=1,{instr:t[e],operator:t[e][0],dest:t[e][1].split("$")[1],src1:t[e][2].split("$")[1],val:t[e][3],completed:!1}):T.indexOf(t[e][0])>=0?($.pc+=1,{instr:t[e],operator:t[e][0],src1:t[e][1].split("$")[1],src2:t[e][2].split("$")[1],label:z.pointer.get(t[e][3]),completed:!1}):_.indexOf(t[e][0])>=0?($.pc+=1,"lw"===t[e][0]?{instr:t[e],operator:t[e][0],dest:t[e][1].split("$")[1],src1:t[e][2].split("$")[1].split(")")[0],offset:parseInt(t[e][2].split("(")[0]),completed:!1}:"li"===t[e][0]||"lui"===t[e][0]?{instr:t[e],operator:t[e][0],dest:t[e][1].split("$")[1],val:parseInt(t[e][2]),completed:!1}:{instr:t[e],operator:t[e][0],dest:t[e][1].split("$")[1],addr:z.pointer.get(t[e][2]),completed:!1}):A.indexOf(t[e][0])>=0?"j"===t[e][0]?($.pc=z.pointer.get(t[e][1]),{instr:t[e],operator:t[e][0],label:z.pointer.get(t[e][1]),completed:!1}):($.endOfInstr=!0,{instr:t[e],operator:t[e][0],src1:t[e][1].split("$")[1],completed:!1}):F.indexOf(t[e][0])>=0?($.pc+=1,{instr:t[e],operator:t[e][0],dest:t[e][2].split("$")[1].split(")")[0],src1:t[e][1].split("$")[1],offset:parseInt(t[e][2].split("(")[0]),completed:!1}):"syscall"===t[e][0]?($.pc+=1,{instr:t[e],operator:t[e][0],src1:"a0",completed:!1}):t[e].length>1?(alert("Operation not found: "+t[e][0]),void($.running=!1)):($.pc+=1,null)},D=["add","sub","slt"],H=["addi","slti"],W=["beq","bne"],q=["lw","li","la","lui"],U=["j","jr"],X=["sw"],Y=function(e){if(D.indexOf(e.operator)>=0)return e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},e.src2={val:parseInt($.getRegister(e.src2)),reg:e.src2},e;if(H.indexOf(e.operator)>=0)return e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},e;if(W.indexOf(e.operator)>=0){e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},e.src2={val:parseInt($.getRegister(e.src2)),reg:e.src2};var t=e.src1.val,a=e.src2.val;return void 0!==e.dep1&&""!==e.dep1&&(t=e.dep1,e.dep1=""),void 0!==e.dep2&&""!==e.dep2&&(a=e.dep2,e.dep2=""),"beq"===e.operator&&t===a?$.pc=e.label:"bne"===e.operator&&t!==a&&($.pc=e.label),e}return q.indexOf(e.operator)>=0?("lw"===e.operator&&(e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1}),e):U.indexOf(e.operator)>=0?("jr"===e.operator?(e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},t=e.src1.val,void 0!==e.dep1&&""!==e.dep1&&(t=e.dep1,e.dep1=""),$.pc=t):$.pc=e.label,e):X.indexOf(e.operator)>=0?(e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},e):"syscall"===e.operator?(e.src1={val:parseInt($.getRegister(e.src1)),reg:e.src1},e):void 0},G=function(e,t,a){switch(e.operator){case"add":e.src1.val=$.getRegister(e.src1.reg),e.src2.val=$.getRegister(e.src2.reg);var n=e.src1.val,s=e.src2.val;void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1=""),void 0!==e.dep2&&""!==e.dep2&&(s=e.dep2,e.dep2=""),e.result=parseInt(n)+parseInt(s);break;case"addi":e.src1.val=$.getRegister(e.src1.reg),n=e.src1.val,void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1=""),e.result=parseInt(n)+parseInt(e.val);break;case"sub":e.src1.val=$.getRegister(e.src1.reg),e.src2.val=$.getRegister(e.src2.reg),n=e.src1.val,s=e.src2.val,void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1=""),void 0!==e.dep2&&""!==e.dep2&&(s=e.dep2,e.dep2=""),e.result=parseInt(n)-parseInt(s);break;case"slt":e.src1.val=$.getRegister(e.src1.reg),e.src2.val=$.getRegister(e.src2.reg),n=e.src1.val,s=e.src2.val,void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1=""),void 0!==e.dep2&&""!==e.dep2&&(s=e.dep2,e.dep2="");var i=parseInt(n)<parseInt(s);e.result=i?1:0;break;case"slti":e.src1.val=$.getRegister(e.src1.reg),n=e.src1.val,void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1=""),i=parseInt(n)<parseInt(e.val),e.result=i?1:0;break;case"lw":e.src1.val=$.getRegister(e.src1.reg),n=e.src1.val,void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1="");var r=(n-268500992)/4+parseInt(e.offset/4),l=t.readFromCache(r,a);e.result=l[0],e.foundAt=l[1],"mm"===e.foundAt?(t.missL1++,t.missL2++):"l2"===e.foundAt?(t.missL1++,t.hitsL2++):t.hitsL1++;break;case"li":e.result=e.val;break;case"lui":e.result=e.val<<16;break;case"la":e.result=e.addr}return e},J=function(e,t,a){if("lw"===e.operator){e.src1.val=$.getRegister(e.src1.reg);var n=e.src1.val;void 0!==e.dep1&&""!==e.dep1&&(n=e.dep1,e.dep1="");var s=(n-268500992)/4+parseInt(e.offset/4),i=t.readFromCache(s,a);e.result=i[0],$.setRegister(e.dest,e.result)}else"li"===e.operator||"lui"===e.operator?"li"===e.operator?$.setRegister(e.dest,parseInt(e.val)):$.setRegister(e.dest,e.val<<16):"la"===e.operator&&$.setRegister(e.dest,e.addr)},K=function(e,t,a){if(void 0!==e.result&&void 0!==e.dest&&$.setRegister(e.dest,e.result),"sw"===e.operator){e.src1.val=$.getRegister(e.src1.reg);for(var n=parseInt($.getRegister(e.dest)-268500992)/4+parseInt(e.offset/4),s=e.src1.val.toString(2),i=s.length,r=0;r<32-i;r++)s="0"+s;t.writeThrough(n,s,a)}return"jr"===e.operator&&($.running=!1),e.completed=!0,e},V=[],Q=1,Z=0,ee=0,te=null,ae=0,ne=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).state={code:"",instructions:null,registers:$.registers,pc:0,print:"//console...read-only\n",clicked:"registers",sampleProgramTriggered:!1,dataForwarding:!1,running:0,performance:{},pipeline:[],enableMoreStats:!1,l1CacheConfig:{cacheSize:32,blockSize:8,associativity:2,latency:2},l2CacheConfig:{cacheSize:128,blockSize:32,associativity:2,latency:4},showCacheConfig:!1,mainMemoryLatency:6},a.setFile=function(){var e=Object(o.a)(c.a.mark((function e(t){var n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],(s=new FileReader).onload=function(){a.setState({code:String(s.result)})},s.readAsText(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteFile=function(e){a.setState({code:""})},a.CacheConfigure=function(){te=new x(a.state.l1CacheConfig,a.state.l2CacheConfig)},a.assemble=function(){$.reset(),z.reset(),ae=0,a.CacheConfigure(),a.setState({running:0}),V=[],Q=1,Z=0,ee=0,document.getElementsByClassName("pipeline-screen")[1].innerHTML='<table border=\'2\' id="table-main">\n\t\t\t\t<tr id="cycle-number">\n\t\t\t\t\t<td align=\'center\' nowrap="nowrap" class="instr-cell" id="instr-cell-heading">Cycle/Instruction</td>\n\t\t\t\t</tr>\n\t\t\t</table>';var e=a.state.code;""!==e?(a.setState({instructions:z.parse(e)}),z.pointer.get("main")?$.pc=parseInt(z.pointer.get("main")):$.running=!1,a.setState({print:a.state.print+"Successfully Assembled...\n"})):alert("Upload or write assembly code first!")},a.Execute=function(){if(a.state.instructions){a.setState({running:1});var e=window.setInterval((function(){if(!$.running)return a.setState({print:a.state.print+"\nEnd of Instructions...",running:2,performance:{cycles:Q-1,stalls:Z,l1CacheHits:te.hitsL1,l1CacheMiss:te.missL1,l2CacheHits:te.hitsL2,l2CacheMiss:te.missL2}}),void window.clearInterval(e);a.StepRun()}),0)}else alert("Assemble your code first!")},a.Display_Stall=function(e,t){a.state.enableMoreStats&&(document.getElementsByClassName("row".concat(e,"-col").concat(t))[0].innerHTML="S");Z+=1},a.StepRun=function(){if(a.state.instructions)if($.pc>=a.state.instructions.length&&($.endOfInstr=!0,V[V.length-1].completed&&($.running=!1)),$.running){for(var e=0,t=0,n="";t<V.length;){if(1===e)a.Display_Stall(t,Q);else{switch(V[t].pipeline_stage){case"IF":for(var s=t-1;s>=ae;s--)if(void 0!==V[s].dest&&void 0!==V[t].src1){if(V[s].dest===V[t].src1&&("beq"===V[t].operator||"bne"===V[t].operator))if(!V[s].completed&&a.state.dataForwarding){if(V[t].dep1=V[s].result,"MEM"!==V[s].pipeline_stage&&"WB"!==V[s].pipeline_stage&&" "!==V[s].pipeline_stage){e=1;break}}else if(" "!==V[s].pipeline_stage){e=1;break}}else if(void 0!==V[s].dest&&void 0!==V[t].src2&&V[s].dest===V[t].src2&&("beq"===V[t].operator||"bne"===V[t].operator))if(!V[s].completed&&a.state.dataForwarding){if(V[t].dep2=V[s].result,"MEM"!==V[s].pipeline_stage&&"WB"!==V[s].pipeline_stage&&" "!==V[s].pipeline_stage){e=1;break}}else if(" "!==V[s].pipeline_stage){e=1;break}1!==e&&(V[t]=Y(V[t]),V[t].pipeline_stage="ID/RF");break;case"ID/RF":for(var i=t-1;i>=ae;i--){if("EX"===V[i].pipeline_stage&&V[i].operator===V[t].operator){e=1;break}if(void 0!==V[i].dest&&void 0!==V[t].src1){if(V[i].dest===V[t].src1.reg)if(!V[i].completed&&a.state.dataForwarding){if(V[t].dep1=V[i].result,"MEM"!==V[i].pipeline_stage&&"WB"!==V[i].pipeline_stage&&" "!==V[i].pipeline_stage){e=1;break}}else if(" "!==V[i].pipeline_stage&&!a.state.dataForwarding){e=1;break}}else if(void 0!==V[i].dest&&void 0!==V[t].src2){if(V[i].dest===V[t].src2.reg)if(!V[i].completed&&a.state.dataForwarding){if(V[t].dep2=V[i].result,"MEM"!==V[i].pipeline_stage&&"WB"!==V[i].pipeline_stage&&" "!==V[i].pipeline_stage){e=1;break}}else if(" "!==V[i].pipeline_stage&&!a.state.dataForwarding){e=1;break}}else if(V[i].dest&&V[i].dest===V[t].dest){if("EX"===V[i].pipeline_stage&&1-V[i].execute_counter>=0){e=1;break}}else if("EX"===V[i].pipeline_stage&&1-V[i].execute_counter===0){e=1;break}}if(1!==e){if(V[t].pipeline_stage="EX","syscall"===V[t].operator&&(a.state.dataForwarding?a.printToConsole(V[t-2].result,V[t-1].result):a.printToConsole($.getRegister("v0"),$.getRegister("a0"))),V[t]=G(V[t],te,Q),"lw"===V[t].operator){switch(V[t].foundAt){case"l1":V[t].memoryLatency=a.state.l1CacheConfig.latency;break;case"l2":V[t].memoryLatency=a.state.l2CacheConfig.latency;break;case"mm":V[t].memoryLatency=a.state.mainMemoryLatency}V[t].memoryCounter=0}V[t].execute_counter++}break;case"EX":for(var r=t-1;r>=ae;r--){if("lw"===V[r].operator&&V[r].memoryCounter<=V[r].memoryLatency){e=1;break}if(void 0!==V[r].dest&&void 0!==V[t].src1){if(V[r].dest===V[t].src1.reg)if(!V[r].completed&&a.state.dataForwarding){if(V[t].dep1=V[r].result,"WB"!==V[r].pipeline_stage&&" "!==V[r].pipeline_stage){e=1;break}}else if(" "!==V[r].pipeline_stage&&!a.state.dataForwarding){e=1;break}}else if(void 0!==V[r].dest&&void 0!==V[t].src2&&V[r].dest===V[t].src2.reg)if(!V[r].completed&&a.state.dataForwarding){if(V[t].dep2=V[r].result,"WB"!==V[r].pipeline_stage&&" "!==V[r].pipeline_stage){e=1;break}}else if(" "!==V[r].pipeline_stage&&!a.state.dataForwarding){e=1;break}}"lw"===V[t].operator?(V[t].pipeline_stage="MEM",V[t].memoryCounter++):1!==e&&("sw"===V[t].operator&&(V[t].strCounter=0),V[t].pipeline_stage="MEM",J(V[t],te,Q));break;case"MEM":for(var l=t-1;l>=ae;l--)if("sw"===V[l].operator&&V[l].strCounter<=a.state.mainMemoryLatency){e=1;break}1!==e&&("sw"===V[t].operator?(V[t].pipeline_stage="WB",V[t].strCounter++):"lw"===V[t].operator&&V[t].memoryCounter===V[t].memoryLatency?(V[t].memoryCounter++,V[t].pipeline_stage="WB"):"lw"===V[t].operator&&V[t].memoryCounter<V[t].memoryLatency?(V[t].pipeline_stage="MEM",V[t].memoryCounter++):(V[t].pipeline_stage="WB",V[t]=K(V[t],te,Q)),"lw"===V[t].operator&&V[t].memoryCounter===V[t].memoryLatency&&(V[t].pipeline_stage="MEM",J(V[t],te,Q)));break;case"WB":"sw"===V[t].operator&&V[t].strCounter===a.state.mainMemoryLatency&&(V[t].strCounter++,V[t].pipeline_stage=" "),"sw"===V[t].operator&&V[t].strCounter<a.state.mainMemoryLatency?(V[t].strCounter++,V[t].pipeline_stage="WB"):(ae++,V[t].pipeline_stage=" "),"sw"===V[t].operator&&V[t].strCounter===a.state.mainMemoryLatency&&(V[t]=K(V[t],te,Q));break;case" ":V[t].pipeline_stage=" ";break;default:return void alert("Unrecognized Pipeline Stage!")}if(1===e)a.Display_Stall(t,Q);else if(" "!==(n=V[t].pipeline_stage)&&a.state.enableMoreStats){var c=document.getElementsByClassName("row".concat(t,"-col").concat(Q));c[0].innerHTML=n}}t++}if(1!==e&&!$.endOfInstr)if(V.length>0&&("bne"===V[V.length-1].operator||"beq"===V[V.length-1].operator)&&"ID/RF"===V[V.length-1].pipeline_stage)e=1,ee=1;else{var o=P($.pc,a.state.instructions);o&&(a.state.enableMoreStats&&a.addToTable(t,o.instr),o.pipeline_stage="IF",o.execute_counter=0,V.push(o),1===ee&&(a.Display_Stall(t,Q-1),ee=0),a.state.enableMoreStats&&((c=document.getElementsByClassName("row".concat(t,"-col").concat(Q)))[0].innerHTML="IF"))}a.setState({registers:$.registers}),Q++}else a.setState({print:a.state.print+"\nEnd of Instructions...",running:2,performance:{cycles:Q-1,stalls:Z,l1CacheHits:te.hitsL1,l1CacheMiss:te.missL1,l2CacheHits:te.hitsL2,l2CacheMiss:te.missL2}});else alert("Assemble your code first!")},a.addToTable=function(e,t){for(var a=document.getElementById("table-main"),n=document.getElementById("cycle-number"),s=5*e;s<5*e+5;s++){var i=n.insertCell(s+1);i.setAttribute("align","center"),i.setAttribute("nowrap","nowrap"),i.className="num-cell",i.id="num-cell-heading",i.innerHTML=s+1}var r=a.insertRow(e+1),l=r.insertCell(0);l.className="instr-cell row".concat(e,"-col",0),l.innerHTML=t.join(" "),l.scrollTop=l.scrollHeight;for(var c=1;c<=5*e+5;c++){r.insertCell(c).className="num-cell row".concat(e,"-col").concat(c)}},a.showCacheContents=function(e){te&&(1===e&&te.dataL1.forEach((function(e,t){var a=document.getElementsByClassName("cache-blockL1".concat(t))[0];a&&(a.innerHTML=isNaN(e)?"":parseInt(e,2))})),2===e&&te.dataL2.forEach((function(e,t){var a=document.getElementsByClassName("cache-blockL2".concat(t))[0];a&&(a.innerHTML=isNaN(e)?"":parseInt(e,2))})))},a.onSideNavClick=function(e){a.setState({clicked:e})},a.onSampleProgramClick=function(e){"bubbleSort"===e?a.setState({code:w}):"sumOfNums"===e?a.setState({code:I}):"tryOutPipeline"===e?a.setState({code:k}):a.setState({code:N})},a.onDataForwardEnable=function(){var e=a.state.dataForwarding;e||a.assemble(),a.setState({dataForwarding:!e})},a.printToConsole=function(e,t){if(1===e){var n=a.state.print+t+" ";a.setState({print:n})}},a.onEnableMoreStats=function(){var e=a.state.enableMoreStats;e||a.assemble(),a.setState({enableMoreStats:!e})},a.onCodeChange=function(e){a.setState({code:e})},a.configureCache=function(e,t,n,s,i){1===e&&a.setState({l1CacheConfig:{cacheSize:t,blockSize:n,associativity:s,latency:i}}),2===e&&a.setState({l2CacheConfig:{cacheSize:t,blockSize:n,associativity:s,latency:i}})},a.onToggleCacheSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!a.state.showCacheConfig;a.setState({showCacheConfig:e})},a.onMainMemoryConfig=function(e){a.setState({mainMemoryLatency:e})},a.render=function(){return s.a.createElement("div",{className:"main-screen"},s.a.createElement("div",null,s.a.createElement(y,{setFile:a.setFile,deleteFile:a.deleteFile,assemble:a.assemble,execute:a.Execute,stepRun:a.StepRun,toggleDF:a.onDataForwardEnable,dataForw:a.state.dataForwarding,running:a.state.running,toggleMS:a.onEnableMoreStats,moreStats:a.state.enableMoreStats,toggleCacheSettings:a.onToggleCacheSettings,isShowing:a.state.showCacheConfig})),s.a.createElement("div",{className:"App"},s.a.createElement("div",{style:{width:"20%"}},s.a.createElement(S,{registers:a.state.registers,pc:a.state.pc,clicked:a.state.clicked,onNavClick:a.onSideNavClick,dataSegment:$.memory,memoryUsed:4*z.memPtr,sampleProgram:a.onSampleProgramClick,running:a.state.running,performance:a.state.performance,configureCache:a.configureCache,l1CacheInfo:a.state.l1CacheConfig,l2CacheInfo:a.state.l2CacheConfig,isShowing:a.state.showCacheConfig,hideCacheSettings:a.onToggleCacheSettings,mainMemoryConfig:a.onMainMemoryConfig,mainMemory:a.state.mainMemoryLatency,refreshCacheContents:a.showCacheContents})),s.a.createElement("div",{style:{width:"80%"}},s.a.createElement(b,{onCodeChange:a.onCodeChange,code:a.state.code,pc:a.state.pc}),s.a.createElement("div",{style:{height:"1px",backgroundColor:"white"}}),s.a.createElement(E,{console:a.state.print,operations:V,moreStats:a.state.enableMoreStats}))))},a}return Object(h.a)(t,e),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.95cb0a29.chunk.js.map